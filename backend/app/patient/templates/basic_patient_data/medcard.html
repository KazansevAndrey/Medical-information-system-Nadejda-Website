{%extends "department/base.html"%}
{%load static%}
{% load custom_tags %}
{%block style%}
<link href={% static "/img/app-icon-all.png"%} rel="shortcut icon">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-6o3tPtQyASQw5kF5tReF6U3bJ0PLyp7ZnN5CQe5eBbm9FSuF9hXnO/GJS2doq5F4DlYbKN8cdSGcuW2meGwMZg==" crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link rel="stylesheet" href={% static "css/medcard.css"%}>
{%endblock%}
{%block header%}
  <header>     
      <a href="{% url 'department:department' 'all'%}"><i class="fa-solid fa-arrow-right-from-bracket"id="exit"></i></a>
      <div style="flex-direction: row;width: 100%; max-width: 100%; display: flex; justify-content: space-between; align-items: center;">
      <a href="{% url 'department:department' 'all'%}"><img src="{% static 'img/head-logo.png'%}" alt="logo" class="logo"></a>
<form>
  <p>Ваше отделение: {{department.name}}</p>
</form>
        <div style="position: relative; display: inline-block;">
            <a href="#" class="dropdown-toggle"><i class="fa-solid fa-user-nurse doctor doctor-icon"></i><span class="doctor-name">{{doctor_name}}</span></a>
            <div class="dropdown-menu">
                <div class="doctor-name">{{doctor_name}}</div>
                <button class="logout-button" onclick="Exit()">Выход</button>
            </div>
        </div>
    </div>
</header>
{%endblock%}
{%block content%}
    <div class="block1">
      <div class="block2">
        <button class="btn_block2 active" id="all-patients-btn" onclick="showContent('content1')">Данные</button>
        <button class="btn_block2" id="my-patients-btn" onclick="showContent('content2')">Медицинские записи</button>
      </div>
    </div>
    <div id="content1" class="content1 active">
      <div class="status">
        <span>{{patient.last_name}} {{patient.first_name}} {{patient.surname}}, {{ patient.age }} {{ patient.age|age_pluralize}}</span> <br />
        <span id="status">Статус МК: </span><span class="status-open" id="status">Открыта</span>
      </div>
      <div class="info-section">
        <div class="section-title">Информация о пациенте</div>
        <div class="info-block">
          <div>
            <i class="fas fa-calendar-alt"></i>
            <span class="span_pokaz">Дата рождения: <span class="span_rez">{{patient.birth_date}}</span></span>
          </div>
          <div>
            <i class="fas fa-id-card"></i> <span class="span_pokaz">ИИН: <span class="span_rez">{{patient.iin}}</span></span>
          </div>
        </div>
        <div class="info-block">
          <div>
            <i class="fas fa-info-circle"></i> <span class="span_pokaz">Номер МК: <span class="span_rez">{{med_card.med_card_number}}</span></span>
          </div>
          <div><i class="fas fa-venus-mars"></i> <span class="span_pokaz">Пол: <span class="span_rez"> {{patient.gender}} </span></span></div>
        </div>
        <div class="info-block">
          <div>
            <i class="fas fa-ruler-vertical"></i> <span class="span_pokaz">Рост: <span class="span_rez"> {{metricks.height}} см</span></span>
          </div>
          <div><i class="fas fa-weight"></i> <span class="span_pokaz">Вес: <span class="span_rez"> {{metricks.weight}} кг</span></span></div>
        </div>
      </div>
      <div class="warning-section">
        <div class="section-title">Предупреждения</div>
        <div class="btn-wrapper">
          <button class="btn_in2 reanimation" style="background: #f80202b9"> <!-- у реаниматион менять дисплей ноне если он не в реанимации, дисплей флекс если в реанимации-->
            <i class="fas fa-exclamation-triangle"></i>
            <span>В реанимации</span>
          </button>
          <button class="btn_in2" onclick="hospitalization_information('{{patient.id}}')">
            <i class="fas fa-hospital"></i>
            <span>Данные о госпитализации</span>
          </button>
          <button class="btn_in2" onclick="archive_medcards('{{patient.id}}')">
            <i class="fas fa-folder-open"></i>
            <span>Архивные мед. карты</span>
          </button>
        </div>
      </div>
      <div class="measurements-section">
        <div class="section-title">Показатели</div>
        <div class="info-block">
          <div>
            <i class="fas fa-thermometer-half"></i>
            <span class="span_pokaz">Температура: <span class="span_rez"> {{metricks.temperatury}}</span></span>
          </div>
          <div><i class="fas fa-heartbeat"></i> <span class="span_pokaz">АД: <span class="span_rez"> {{metricks.pressure}} </span></span></div>
        </div>
        <div class="info-block">
          <div><i class="fas fa-heart"></i> <span class="span_pokaz">ЧСС: <span class="span_rez"> {{metricks.puls}} </span></span></div>
          <div><i class="fas fa-tint"></i> <span class="span_pokaz">Сатурация: <span class="span_rez"> {{metricks.saturation}} </span></span></div>
        </div>
        <div class="info-block">
          <div><i class="fas fa-lungs"></i> <span class="span_pokaz">ЧДД: <span class="span_rez"> {{metricks.resperatory_rate}} </span></span></div>
          <div><i class="fas fa-hashtag"></i> <span class="span_pokaz">Выпускники: <span class="span_rez"> 0 </span></span></div>
        </div>
      </div>
    </div>
    <div id="content2" class="content2">
      <div class="forms">
        <form class="form_class">
          <select name="categories" id="categories" class="ds-select">
            <option value="all">Все</option>
            <option value="analyzes">Анализы</option>
            <option value="examination">Первичный осмотр</option>
            <option value="diagnoses">Дигнозы</option>
            <option value="diaries">Дневники</option>
          </select>
        </form>
        <form class="form_class">
          <select name="data" id="data" class="ds-select">
            <option value="all_time">За все время</option>
            <option value="today">Сегодня</option>
            <option value="yesterday">Вчера</option>
            <option value="last_2_days">Последние 2 дня</option>
          </select>
        </form>
        <form class="form_class">
          <select name="categories_select" id="list_type" class="ds-select" onchange="showContent2(this.value)">
            <option value="by_category">По категориям</option>
            <option value="chronologically">По хронологии</option>
          </select>
        </form>
      </div>
      <div class="input-group">
        <input id="search-input" type="search" class="search" placeholder="Поиск анализа"/>
        <button id="search-btn" type="button" class="search-btn">Поиск</button>
      </div>
      <div id="content11" class="content11">
        <div class="buttons-vertical">
          <div id="analyzes" class="button" onclick="toggleDropdown1('dropdown1')">
            <span class="button-title">Результаты анализов</span>
            <span class="button-count">({{analyzes.count}})</span>
          </div>
          
          <div id="dropdown1" class="dropdown1">
            {%for analisis in analyzes%}
            <div class="dropdown-item" onclick="analyzes('{{analisis.id}}')" id="analisis">
              <div class="span-column">
                <span class="item-title">{{analisis.analysis_name}}</span>
                <span class="item-date">{{analisis.date_taken|date:"d.m.Y"}}</span>
              </div>
              <i class="fa-solid fa-arrow-right awesome"></i>
            </div>
            {%endfor%}
          </div>
          <div id="examinations"class="button" onclick="toggleDropdown1('dropdown2')">
            <span class="button-title">Первичный осмотр</span>
            <span class="button-count">({{examinations.count}})</span>
          </div>
          <div id="dropdown2" class="dropdown1">
            {%for examination in examinations%}
            <div class="dropdown-item" onclick="inspections('{{examination.id}}')" id="d4">
              <div class="span-column">
                <span class="item-title">Первичный осмотр</span>
                <span class="item-date">{{examination.date|date:"d.m.Y"}}</span>
              </div>
              <i class="fa-solid fa-arrow-right awesome"></i>
            </div>
            {%endfor%}
            
          </div>
          <div id="diagnoses" class="button" onclick="toggleDropdown1('dropdown3')">
            <span class="button-title">Диагнозы</span>
            <span class="button-count">({{diagnoses.count}})</span>
          </div>
          <div id="dropdown3" class="dropdown1">
            {%for diagnose in diagnoses%}
            <div class="dropdown-item" onclick="diagnoses('{{diagnose.id}}')" id="d7">
              <div class="span-column">
                <span class="item-title">{{diagnose.code}}</span>
                <span class="item-date">{{diagnose.date|date:"d.m.Y"}}</span>
                <span class="item-date">{{diagnose.get_kind_display}}</span>
              </div>
              <i class="fa-solid fa-arrow-right awesome"></i>
            </div>
            {% endfor %}
          </div>
          <div id="diaries" class="button" onclick="toggleDropdown1('dropdown4')">
            <span class="button-title">Дневники</span>
            <span class="button-count">({{diaries.count}})</span>
          </div>
          <div id="dropdown4" class="dropdown1">
            {%for diary in diaries%}
            <div class="dropdown-item" onclick="diaries('{{diary.id}}')" id="d10">
              <div class="span-column">
                <span class="item-title">{{diary.date|date:"d.m.Y H:i"}}</span>
                <span class="item-date">{{diary.additional}}</span>
              </div>
              <i class="fa-solid fa-arrow-right awesome"></i>
            </div>
            {%endfor%}
          </div>
        </div>
      </div>
      <div id="content12" class="content12">
        <div class="buttons-vertical">
          <div class="dropdown-item" onclick="diagnoses('')" id="d1">
            <div class="span-column1">
              <span class="item-title">(F03.1) Пресенильная деменция неуточненная</span>
              <span class="item-date">02.01.2023</span>
              <span class="item-date">Заключительный</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="diaries('d2')" id="d2">
            <div class="span-column1">
              <span class="item-title">Дневник</span>
              <span class="item-date">03.06.2024 11:07</span>
              <span class="item-date">Все норм</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="diagnoses('d3')" id="d3">
            <div class="span-column1">
              <span class="item-title">(В002) Герпетический гингивостоматит и фаринготонзиллит</span>
              <span class="item-date">04.01.2023</span>
              <span class="item-date">Заключительный</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="diaries('d4')" id="d4">
            <div class="span-column1">
              <span class="item-title">Дневник</span>
              <span class="item-date">03.06.2024 11:07</span>
              <span class="item-date">Все норм</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="analyzes('d5')" id="d5">
            <div class="span-column1">
              <span class="item-title">Глюкоза (сахар в крови)</span>
              <span class="item-date">01.01.2023</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="diagnoses('d6')" id="d6">
            <div class="span-column1">
              <span class="item-title">(T000) Поверхностные травмы шеи</span>
              <span class="item-date">03.01.2023</span>
              <span class="item-date">Заключительный</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="inspections('d7')" id="d7">
            <div class="span-column1">
              <span class="item-title">Первичный осмотр</span>
              <span class="item-date">03.06.2024 11:07</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="diaries('d8')" id="d8">
            <div class="span-column1">
              <span class="item-title">Дневник</span>
              <span class="item-date">03.06.2024 11:07</span>
              <span class="item-date">Все норм</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="inspections('d9')" id="d9">
            <div class="span-column1">
              <span class="item-title">Первичный осмотр</span>
              <span class="item-date">03.06.2024 11:07</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="analyzes('d10')" id="d10">
            <div class="span-column1">
              <span class="item-title">Исследование кала на простейшие и гельминты</span>
              <span class="item-date">02.01.2023</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="inspections('d11')" id="d11">
            <div class="span-column1">
              <span class="item-title">Первичный осмотр</span>
              <span class="item-date">03.06.2024 11:07</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
          <div class="dropdown-item" onclick="analyzes('d12')" id="d12">
            <div class="span-column1">
              <span class="item-title">Общий анализ крови 3 параметра</span>
              <span class="item-date">02.01.2023</span>
            </div>
            <i class="fa-solid fa-arrow-right awesome"></i>
          </div>
        </div>
      </div>
    </div>
{%endblock%}
{%block scripts%}
    <script src="{% static 'scripts/medcard.js'%}"></script>
{%endblock%}

